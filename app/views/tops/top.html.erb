<%= render "layouts/user_header" %>

<div class="jumbotron jumbotron-fluid">
  <h2 class="lead">あなたの新生活を照らす　　　<span>Museful</span></h2>
  <hr class="my-4">
  <% if user_signed_in? %>
    <p class="fade fade1">記事を投稿したい方は　<%= link_to "こちら",new_article_path %>　をクリックしてください</p>
    <p class="fade fade2">質問したい方は　<%= link_to "こちら",new_question_path %>　をクリックしてください</p>
  <% else %>
    <p class="fade fade1">ここは引越しなどの新生活に関するお役立ち情報を共有したり、生活に関する悩みなどを会員同士で解決し合うサイトになります。</p>
    <p class="fade fade2">会員登録をすると記事や質問の投稿、閲覧履歴の確認などができるようになります。</p>
    <br>
  <% end %>
  <p class="fade fade3">記事の一覧を見たい方は　<%= link_to "こちら",articles_path %>　をクリックしてください</p>
  <p class="fade fade4">質問の一覧を見たい方は　<%= link_to "こちら",questions_path %>　をクリックしてください</p>
</div>
<div class="top">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-md-10 article-ranking">
        <div class="pin"></div>
        <div class="article-ranking-title">
          <h2>ArticleRanking</h2>
        </div>
        <div class="col-md-10 favorite-box">
          <h5><i class="fa fa-star" aria-hidden="true"></i> いいね数ランキングベスト5</h5>
          <table class="table table-hover ">
            <tbody>
              <% @favorite_articles.each.with_index(1) do |article, i| %>
                <tr>
                  <td><%= "#{i}" %>位</td>
                  <td><%= link_to article_path(article) do%><%= article.title %><% end %></td>
                  <td><%= article.favorites.count %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="col-md-10 bookmark-box">
          <h5><i class="fa fa-star" aria-hidden="true"></i> ブックマーク数ランキングベスト5</h5>
          <table class="table table-hover">
            <tbody>
              <% @bookmark_articles.each.with_index(1) do |article, i| %>
                <tr>
                  <td><%= "#{i}" %>位</td>
                  <td><%= link_to article_path(article) do%><%= article.title %><% end %></td>
                  <td><%= article.bookmarks.count %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
        <div class="col-md-10 average-box">
          <h5><i class="fa fa-star" aria-hidden="true"></i> 評価値ランキングベスト5</h5>
          <table class="table table-hover">
            <tbody>
              <% @avarage_rate_articles.each.with_index(1) do |article, i| %>
                <tr>
                  <td><%= "#{i}" %>位</td>
                  <td><%= link_to article_path(article) do%><%= article.title %><% end %></td>
                  <td><%= article.avarage_rate.floor(1).to_f %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-10 question-ranking">
        <div class="pin"></div>
        <div class="question-ranking-title">
          <h2>QuestionRanking</h2>
        </div>
        <div class="questioin-ranking-box col-md-10">
          <h5><i class="fa fa-star" aria-hidden="true"></i> 共感数ランキングベスト5</h5>
          <table class="table table-hover">
            <tbody>
              <% @respond_questions.each.with_index(1) do |question, i| %>
                <tr>
                  <td><%= "#{i}" %>位</td>
                  <td><%= link_to question_path(question) do%><%= question.title %><% end %></td>
                  <td><%= question.responses.count %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-md-10 new-question-ranking">
        <div class="pin"></div>
        <div class="new-question-title">
          <h2>NewFaceQuestion</h2>
        </div>
        <div class="new-question-box col-md-10">
          <h5><i class="fa fa-star" aria-hidden="true"></i> 新しい質問</h5>
          <table class="table table-hover">
            <tbody>
              <% @new_questions.each do |question| %>
                <tr>
                  <td><%= link_to question_path(question) do%><%= question.title %><% end %></td>
                  <td><%= question.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
                </tr>
              <% end %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>



